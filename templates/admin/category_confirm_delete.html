{% load static %}
<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kategoriyani O'chirish - devSphere</title>
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" href="{% static 'css/delete_post.css' %}">
</head>
<body>
<header>
    <h1><a href="{% url 'home' %}">ğŸš€ devSphere</a></h1>
</header>
<div class="content-wrapper">
    <div class="delete-container">
        <a href="{% url 'category_list' %}" class="back-link">â† Kategoriyalar ro'yxatiga qaytish</a>
        
        <h1>âš ï¸ Kategoriyani O'chirish</h1>

        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li class="{{ message.tags }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}

        <div class="warning">
            <h2>ğŸ—‘ï¸ "{{ object.name }}" kategoriyasini o'chirmoqchimisiz?</h2>
            
            {% if posts_count > 0 %}
                <div style="background: #fee; border: 2px solid #e74c3c; border-radius: 8px; padding: 15px; margin-top: 15px;">
                    <p style="color: #c0392b; margin: 0 0 10px 0;"><strong>âš ï¸ DIQQAT!</strong></p>
                    <p style="color: #c0392b; margin: 5px 0;">Bu kategoriyaga <strong>{{ posts_count }} ta post</strong> bog'liq.</p>
                    <p style="color: #c0392b; margin: 5px 0;">Kategoriyani o'chirganda, shu kategoriyaga tegishli <strong>barcha postlar ham o'chiriladi</strong>!</p>
                </div>
            {% else %}
                <p>Bu kategoriyaga bog'liq postlar yo'q. Xavfsiz o'chirish mumkin.</p>
            {% endif %}
        </div>

        <div class="post-info">
            <p><strong>Kategoriya nomi:</strong> {{ object.name }}</p>
            <p><strong>Slug:</strong> <code>{{ object.slug }}</code></p>
            <p><strong>Yaratilgan sana:</strong> {{ object.created_at|date:"d.m.Y H:i" }}</p>
            {% if posts_count > 0 %}
                <p><strong>Postlar soni:</strong> <span style="color: #e74c3c; font-weight: bold;">{{ posts_count }} ta</span></p>
            {% endif %}
        </div>

        <form method="POST" class="delete-form">
            {% csrf_token %}
            <div class="buttons">
                <button type="submit" class="btn btn-danger">
                    ğŸ—‘ï¸ Ha, O'chirish
                </button>
                <a href="{% url 'category_list' %}" class="btn btn-cancel">
                    âŒ Bekor qilish
                </a>
            </div>
        </form>
    </div>
</div>
</body>
</html>
